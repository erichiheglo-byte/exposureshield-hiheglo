<!DOCTYPE html>
<html>
<head>
    <title>Test Page</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        button { margin: 10px; padding: 10px 20px; }
        pre { background: #f5f5f5; padding: 10px; }
    </style>
</head>
<body>
    <h1>ExposureShield Test</h1>
    
    <div>
        <button onclick="testDirect()">Test Direct API Call</button>
        <button onclick="testMock()">Use Mock Data</button>
        <button onclick="window.location.href='index.html'">Go to Main Site</button>
    </div>
    
    <pre id="result">Click a button...</pre>
    
    <script>
    async function testDirect() {
        const result = document.getElementById('result');
        result.textContent = "Testing /api/check-email...";
        
        try {
            const email = "test@example.com";
            const url = "/api/check-email?email=" + encodeURIComponent(email);
            
            const response = await fetch(url);
            if (!response.ok) throw new Error(`HTTP ${response.status}`);
            
            const data = await response.json();
            result.innerHTML = `<span style="color:green">✅ API Success!</span>\n\n${JSON.stringify(data, null, 2)}`;
        } catch (error) {
            result.innerHTML = `<span style="color:red">❌ API Failed: ${error.message}</span>\n\nUsing mock data instead...`;
            
            // Fallback to mock
            const mockData = {
                success: true,
                email: "test@example.com",
                breaches: 0,
                exposed: false,
                message: "Using mock data - API unavailable"
            };
            result.innerHTML += `\n\nMock Data:\n${JSON.stringify(mockData, null, 2)}`;
        }
    }
    
    function testMock() {
        const result = document.getElementById('result');
        const mockData = {
            success: true,
            email: "test@example.com",
            breaches: 0,
            exposed: false,
            recommendation: "All good!",
            score: 90,
            note: "Using mock data (no API needed)"
        };
        result.innerHTML = `<span style="color:green">✅ Mock Data Loaded</span>\n\n${JSON.stringify(mockData, null, 2)}`;
    }
    </script>
</body>
</html>
